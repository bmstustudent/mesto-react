{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/Popup.js","hooks/useValidation.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeleteConfirmPopup.js","components/ImagePopup.js","utils/Api.js","components/App.js","index.js"],"names":["Header","className","href","src","logo","alt","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","cardDeleteButtonClassName","type","onClick","link","name","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","style","backgroundImage","avatar","about","map","Footer","Popup","isOpen","onClose","children","handleEscapeClose","event","key","useEffect","document","addEventListener","removeEventListener","onMouseUp","target","currentTarget","useValidation","fields","fieldsEnumeration","value","reduce","acc","field","useState","isValid","setIsValid","inputValue","setInputValue","validationMessage","setValidationMessage","handleInputChange","validity","valid","EditProfilePopup","onUpdateUser","isLoading","action","onSubmit","preventDefault","noValidate","onChange","placeholder","minLength","maxLength","pattern","required","EditAvatarPopup","onUpdateAvatar","avatarInputRef","useRef","current","ref","AddPlacePopup","DeleteConfirmPopup","ImagePopup","api","baseUrl","headers","this","fetch","then","_getResponseData","item","method","body","JSON","stringify","newCard","id","res","ok","json","Promise","reject","status","authorization","App","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isDeletePopupOpen","setDeletePopupOpen","isImagePopupOpen","setImagePopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setIsLoading","getUserAndCards","a","all","getUserInfo","getCards","userInfo","console","log","closeAllPopups","Provider","dislikeCard","likeCard","newCards","c","catch","err","setUserInfo","userData","finally","createCard","setAvatar","deleteCard","deleteCards","filter","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c04fbd81.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.8724261e.svg\";","import React from \"react\";\r\nimport logo from \"../images/logo.svg\";\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className=\"header page__header\">\r\n      <a className=\"logo header__logo opacity\" href=\"../../public/index.html\">\r\n        <img className=\"logo__image\" src={logo} alt=\"Логотип\" />\r\n      </a>{\" \"}\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from \"react\";\n\nexport const CurrentUserContext = React.createContext();\n","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nconst Card = ({ card, onCardClick, onCardLike, onCardDelete }) => {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  // Определяем, являемся ли мы владельцем текущей карточки\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\r\n  const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n  // Создаём переменную, которую после зададим в `className` для кнопки удаления\r\n  const cardDeleteButtonClassName = `${\r\n    isLiked\r\n      ? `button pictures__like pictures__like_active opacity`\r\n      : `button pictures__like opacity`\r\n  }`;\r\n\r\n  const handleLikeClick = () => {\r\n    onCardLike(card);\r\n  };\r\n\r\n  const handleDeleteClick = () => {\r\n    onCardDelete(card);\r\n  };\r\n\r\n  const handleClick = () => {\r\n    onCardClick(card);\r\n  };\r\n\r\n  return (\r\n    <li className=\"pictures__item\">\r\n      <button\r\n        className={`${\r\n          isOwn\r\n            ? `button pictures__delete pictures__delete_show opacity`\r\n            : `button pictures__delete opacity`\r\n        }`}\r\n        type=\"button\"\r\n        onClick={handleDeleteClick}\r\n      />\r\n      <img\r\n        className=\"pictures__image\"\r\n        src={card.link}\r\n        alt={card.name}\r\n        onClick={handleClick}\r\n      />\r\n      <div className=\"pictures__cover\">\r\n        <p className=\"pictures__title\">{card.name}</p>\r\n        <div className=\"pictures__like-cover\">\r\n          <button\r\n            className={cardDeleteButtonClassName}\r\n            type=\"button\"\r\n            onClick={handleLikeClick}\r\n          />\r\n          <span className=\"pictures__like-counter\">{card.likes.length}</span>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import React from \"react\";\r\nimport Card from \"./Card\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nconst Main = ({\r\n  onEditAvatar,\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onCardClick,\r\n  onCardLike,\r\n  onCardDelete,\r\n  cards,\r\n}) => {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  \r\n  return (\r\n    <main className=\"content page__content\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__cover\">\r\n          <div\r\n            className=\"avatar profile__avatar\"\r\n            onClick={onEditAvatar}\r\n            style={{ backgroundImage: `url(${currentUser.avatar})` }}\r\n          />\r\n          <div className=\"profile__info\">\r\n            <div className=\"profile__position\">\r\n              <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n              <button\r\n                className=\"button button_edit profile__button opacity\"\r\n                type=\"button\"\r\n                onClick={onEditProfile}\r\n              />\r\n            </div>\r\n            <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n          </div>\r\n        </div>\r\n        <button\r\n          className=\"button button_add opacity\"\r\n          type=\"button\"\r\n          onClick={onAddPlace}\r\n        />\r\n      </section>\r\n\r\n      <section className=\"pictures\">\r\n        <ul className=\"pictures__list\">\r\n          {cards.map((card) => (\r\n            <Card\r\n              key={card._id}\r\n              onCardClick={onCardClick}\r\n              card={card}\r\n              onCardLike={onCardLike}\r\n              onCardDelete={onCardDelete}\r\n            />\r\n          ))}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import React from \"react\";\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer page__footer\">\r\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>{\" \"}\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\n\r\nconst Popup = ({ name, isOpen, onClose, children }) => {\r\n  const handleEscapeClose = (event) => {\r\n    if (event.key === \"Escape\") {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    document.addEventListener(\"keydown\", handleEscapeClose, false);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", handleEscapeClose, false);\r\n    };\r\n  }, [isOpen]);\r\n\r\n  const handleOverlayClose = (event) => {\r\n    if (event.target === event.currentTarget && isOpen) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section\r\n      className={`${\r\n        isOpen\r\n          ? `popup popup_type_${name} popup_opened`\r\n          : `popup popup_type_${name}`\r\n      }`}\r\n      onMouseUp={handleOverlayClose}\r\n    >\r\n      <div\r\n        className={`${\r\n          name === \"picture\"\r\n            ? `popup__container popup__container_type_picture`\r\n            : `popup__container`\r\n        }`}\r\n      >\r\n        <button\r\n          className=\"button popup__close opacity\"\r\n          type=\"button\"\r\n          onClick={onClose}\r\n        />\r\n        {children}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Popup;\r\n","import React from \"react\";\n\nconst useValidation = (fields) => {\n  const fieldsEnumeration = (value) => {\n    return fields.reduce((acc, field) => {\n      acc[field] = value;\n      return acc;\n    }, {});\n  };\n\n  const [isValid, setIsValid] = React.useState(fieldsEnumeration(false));\n  const [inputValue, setInputValue] = React.useState(fieldsEnumeration(\"\"));\n  const [validationMessage, setValidationMessage] = React.useState(\n    fieldsEnumeration(\"\")\n  );\n\n  const handleInputChange = (event) => {\n    const { name, value } = event.target;\n    setInputValue({\n      ...inputValue,\n      [name]: value,\n    });\n\n    setIsValid({\n      ...isValid,\n      [name]: event.target.validity.valid,\n    });\n\n    setValidationMessage({\n      ...validationMessage,\n      [name]: event.target.validationMessage,\n    });\n  };\n\n  return {\n    isValid,\n    setIsValid,\n    inputValue,\n    setInputValue,\n    validationMessage,\n    setValidationMessage,\n    handleInputChange,\n    fieldsEnumeration,\n  };\n};\n\nexport default useValidation;\n","import React from \"react\";\nimport Popup from \"./Popup\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport useValidation from \"../hooks/useValidation\";\n\nconst EditProfilePopup = ({ isOpen, onClose, onUpdateUser, isLoading }) => {\n  const fields = [\"name\", \"about\"];\n\n  const {\n    isValid,\n    setIsValid,\n    inputValue,\n    setInputValue,\n    validationMessage,\n    setValidationMessage,\n    handleInputChange,\n    fieldsEnumeration,\n  } = useValidation(fields);\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const handleSubmit = (event) => {\n    // Запрещаем браузеру переходить по адресу формы\n    event.preventDefault();\n    // Передаём значения управляемых компонентов во внешний обработчик\n    onUpdateUser({\n      name: inputValue.name,\n      about: inputValue.about,\n    });\n  };\n\n  React.useEffect(() => {\n    setInputValue({\n      name: currentUser.name || \"\",\n      about: currentUser.about || \"\",\n    });\n    setIsValid(fieldsEnumeration(true));\n    setValidationMessage(fieldsEnumeration(\"\"));\n  }, [currentUser, isOpen, setInputValue, setIsValid, setValidationMessage]);\n\n  return (\n    <Popup name=\"edit\" isOpen={isOpen} onClose={onClose}>\n      <h2 className=\"popup__title\">Редактировать профиль</h2>\n      <form\n        className={\"popup__form form_type_edit\"}\n        action=\"#\"\n        name=\"edit\"\n        onSubmit={handleSubmit}\n        noValidate\n      >\n        <div className=\"popup__cover\">\n          <label className=\"popup__control\">\n            <input\n              className={`${\n                validationMessage.name\n                  ? `popup__input popup__input_type_name popup__input_type_error`\n                  : `popup__input popup__input_type_name`\n              }`}\n              type=\"text\"\n              name=\"name\"\n              value={inputValue.name}\n              onChange={handleInputChange}\n              placeholder=\"Имя\"\n              minLength=\"2\"\n              maxLength=\"20\"\n              pattern=\"^[0-9A-Za-zА-Яа-яЁё\\D][A-Za-zА-Яа-яЁё\\s\\D]*[A-Za-zА-Яа-яЁё\\D]$\"\n              required\n            />\n            <span\n              className={`${\n                isValid.name\n                  ? `popup__error`\n                  : `popup__error popup__error_type_active`\n              }`}\n            >\n              {validationMessage.name}\n            </span>\n          </label>\n          <label className=\"popup__control\">\n            <input\n              className={`${\n                validationMessage.about\n                  ? `popup__input popup__input_type_about popup__input_type_error`\n                  : `popup__input popup__input_type_about`\n              }`}\n              type=\"text\"\n              name=\"about\"\n              value={inputValue.about}\n              onChange={handleInputChange}\n              placeholder=\"Занятие\"\n              minLength=\"2\"\n              maxLength=\"200\"\n              // pattern=\"^[A-Za-zА-Яа-яЁё\\D][A-Za-zА-Яа-яЁё\\s\\D]*[A-Za-zА-Яа-яЁё\\D]$\"\n              required\n            />\n            <span\n              className={`${\n                isValid.about\n                  ? `popup__error`\n                  : `popup__error popup__error_type_active`\n              }`}\n            >\n              {validationMessage.about}\n            </span>\n          </label>\n        </div>\n        <input\n          className={`${\n            isValid.name && isValid.about\n              ? `button popup__submit`\n              : `button popup__submit popup__submit_type_disabled`\n          }`}\n          type=\"submit\"\n          value={`${isLoading ? `Сохранение...` : `Сохранить`}`}\n          name=\"submit\"\n        />\n      </form>\n    </Popup>\n  );\n};\n\nexport default EditProfilePopup;\n","import React from \"react\";\nimport Popup from \"./Popup\";\nimport useValidation from \"../hooks/useValidation\";\n\nconst EditAvatarPopup = ({ isOpen, onClose, onUpdateAvatar, isLoading }) => {\n  const fields = [\"avatar\"];\n\n  const {\n    isValid,\n    setIsValid,\n    inputValue,\n    setInputValue,\n    validationMessage,\n    setValidationMessage,\n    handleInputChange,\n    fieldsEnumeration,\n  } = useValidation(fields);\n\n  const avatarInputRef = React.useRef(null);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    onUpdateAvatar({\n      avatar: avatarInputRef.current.value,\n    });\n  };\n\n  React.useEffect(() => {\n    setInputValue(fieldsEnumeration(\"\"));\n    setIsValid(fieldsEnumeration(false));\n    setValidationMessage(fieldsEnumeration(\"\"));\n  }, [isOpen, setInputValue, setIsValid, setValidationMessage]);\n\n  return (\n    <Popup name=\"avatar\" isOpen={isOpen} onClose={onClose}>\n      <h2 className=\"popup__title\">Обновить аватар</h2>\n      <form\n        className={\"popup__form form_type_avatar\"}\n        action=\"#\"\n        name=\"avatar\"\n        onSubmit={handleSubmit}\n        noValidate\n      >\n        <div className=\"popup__cover popup__cover_type_avatar\">\n          <label className=\"popup__control\">\n            <input\n              ref={avatarInputRef}\n              className={`${\n                validationMessage.avatar\n                  ? `popup__input popup__input_type_avatar popup__input_type_error`\n                  : `popup__input popup__input_type_avatar`\n              }`}\n              type=\"url\"\n              name=\"avatar\"\n              value={inputValue.avatar}\n              placeholder=\"Ссылка на картинку\"\n              onChange={handleInputChange}\n              required\n            />\n            <span\n              className={`${\n                isValid.avatar\n                  ? `popup__error`\n                  : `popup__error popup__error_type_active`\n              }`}\n            >\n              {validationMessage.avatar}\n            </span>\n          </label>\n        </div>\n        <input\n          className={`${\n            isValid.avatar\n              ? `button popup__submit`\n              : `button popup__submit popup__submit_type_disabled`\n          }`}\n          type=\"submit\"\n          value={`${isLoading ? `Сохранение...` : `Сохранить`}`}\n          name=\"submit\"\n        />\n      </form>\n    </Popup>\n  );\n};\n\nexport default EditAvatarPopup;\n","import React from \"react\";\nimport Popup from \"./Popup\";\nimport useValidation from \"../hooks/useValidation\";\n\nconst AddPlacePopup = ({ isOpen, onClose, onAddPlace, isLoading }) => {\n  const fields = [\"name\", \"link\"];\n\n  const {\n    isValid,\n    setIsValid,\n    inputValue,\n    setInputValue,\n    validationMessage,\n    setValidationMessage,\n    handleInputChange,\n    fieldsEnumeration,\n  } = useValidation(fields);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    onAddPlace({\n      name: inputValue.name,\n      link: inputValue.link,\n    });\n  };\n\n  React.useEffect(() => {\n    setInputValue(fieldsEnumeration(\"\"));\n    setIsValid(fieldsEnumeration(false));\n    setValidationMessage(fieldsEnumeration(\"\"));\n  }, [isOpen, setInputValue, setIsValid, setValidationMessage]);\n\n  return (\n    <Popup name=\"add\" isOpen={isOpen} onClose={onClose}>\n      <h2 className=\"popup__title\">Новое место</h2>\n      <form\n        className={\"popup__form form_type_add\"}\n        action=\"#\"\n        name=\"add\"\n        onSubmit={handleSubmit}\n        noValidate\n      >\n        <div className=\"popup__cover\">\n          <label className=\"popup__control\">\n            <input\n              className={`${\n                validationMessage.name\n                  ? `popup__input popup__input_type_title popup__input_type_error`\n                  : `popup__input popup__input_type_title`\n              }`}\n              type=\"text\"\n              name=\"name\"\n              placeholder=\"Название\"\n              minLength=\"1\"\n              maxLength=\"30\"\n              pattern=\"^[A-Za-zА-Яа-яЁё\\D][A-Za-zА-Яа-яЁё\\s\\D]*[A-Za-zА-Яа-яЁё\\D]$\"\n              required\n              value={inputValue.name}\n              onChange={handleInputChange}\n            />\n            <span\n              className={`${\n                isValid.name\n                  ? `popup__error`\n                  : `popup__error popup__error_type_active`\n              }`}\n            >\n              {validationMessage.name}\n            </span>\n          </label>\n          <label className=\"popup__control\">\n            <input\n              className={`${\n                validationMessage.link\n                  ? `popup__input popup__input_type_link popup__input_type_error`\n                  : `popup__input popup__input_type_link`\n              }`}\n              type=\"url\"\n              name=\"link\"\n              placeholder=\"Ссылка на картинку\"\n              required\n              value={inputValue.link}\n              onChange={handleInputChange}\n            />\n            <span\n              className={`${\n                isValid.link\n                  ? `popup__error`\n                  : `popup__error popup__error_type_active`\n              }`}\n            >\n              {validationMessage.link}\n            </span>\n          </label>\n        </div>\n        <input\n          className={`${\n            isValid.link && isValid.name\n              ? `button popup__submit`\n              : `button popup__submit popup__submit_type_disabled`\n          }`}\n          type=\"submit\"\n          value={`${isLoading ? `Сохранение...` : `Сохранить`}`}\n          name=\"submit\"\n        />\n      </form>\n    </Popup>\n  );\n};\n\nexport default AddPlacePopup;\n","import React from \"react\";\nimport Popup from \"./Popup\";\n\nconst DeleteConfirmPopup = ({\n  card,\n  onClose,\n  isOpen,\n  onCardDelete,\n  isLoading,\n}) => {\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    onCardDelete(card);\n  };\n\n  return (\n    <Popup name=\"prevent\" isOpen={isOpen} onClose={onClose}>\n      <h2 className=\"popup__title\">Вы уверены?</h2>\n      <form\n        className={\"popup__form form_type_prevent\"}\n        action=\"#\"\n        name=\"prevent\"\n        onSubmit={handleSubmit}\n        noValidate\n      >\n        <input\n          className=\"button popup__submit\"\n          type=\"submit\"\n          name=\"submit\"\n          value={`${isLoading ? `Удаление...` : `Да`}`}\n        />\n      </form>\n    </Popup>\n  );\n};\n\nexport default DeleteConfirmPopup;\n","import React from \"react\";\r\nimport Popup from \"./Popup\";\r\n\r\nconst ImagePopup = ({ card, isOpen, onClose }) => {\r\n  return (\r\n    <Popup name=\"picture\" isOpen={isOpen} onClose={onClose}>\r\n      <figure className=\"popup__figure\">\r\n        <img className=\"popup__image\" src={card.link} alt={card.name} />\r\n        <figcaption className=\"popup__caption\">{card.name}</figcaption>\r\n      </figure>\r\n    </Popup>\r\n  );\r\n};\r\n\r\nexport default ImagePopup;\r\n","class Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this.baseUrl = baseUrl;\r\n    this.headers = headers;\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this.baseUrl}users/me`, {\r\n      headers: this.headers,\r\n    }).then(this._getResponseData);\r\n  }\r\n\r\n  getCards() {\r\n    return fetch(`${this.baseUrl}cards`, {\r\n      headers: this.headers,\r\n    }).then(this._getResponseData);\r\n  }\r\n\r\n  setUserInfo(item) {\r\n    return fetch(`${this.baseUrl}users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        name: item.name,\r\n        about: item.about,\r\n      }),\r\n    }).then(this._getResponseData);\r\n  }\r\n\r\n  createCard(newCard) {\r\n    return fetch(`${this.baseUrl}cards`, {\r\n      method: \"POST\",\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        name: newCard.name,\r\n        link: newCard.link,\r\n      }),\r\n    }).then(this._getResponseData);\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this.baseUrl}cards/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this.headers,\r\n    }).then(this._getResponseData);\r\n  }\r\n\r\n  likeCard(id) {\r\n    return fetch(`${this.baseUrl}cards/likes/${id}`, {\r\n      method: \"PUT\",\r\n      headers: this.headers,\r\n    }).then(this._getResponseData);\r\n  }\r\n\r\n  dislikeCard(id) {\r\n    return fetch(`${this.baseUrl}cards/likes/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this.headers,\r\n    }).then(this._getResponseData);\r\n  }\r\n\r\n  setAvatar(avatar) {\r\n    return fetch(`${this.baseUrl}users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this.headers,\r\n      body: JSON.stringify(avatar),\r\n    }).then(this._getResponseData);\r\n  }\r\n  _getResponseData(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-16/\",\r\n  headers: {\r\n    authorization: \"b9208915-d1f7-4b9c-af49-26bdde24640d\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\nexport default api;\r\n\r\n//  - получить список всех карточек в виде массива (GET)\r\n//  - добавить карточку (POST)\r\n//  - удалить карточку (DELETE)\r\n//  - получить данные пользователя (GET)\r\n//  - заменить данные пользователя (PATCH)\r\n//  - заменить аватар (PATCH)\r\n//  - лайкнуть карточку (PUT)\r\n//  - удалить лайк карточки (DELETE)\r\n","import React from \"react\";\r\nimport Header from \"./Header\";\r\nimport Main from \"./Main\";\r\nimport Footer from \"./Footer\";\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport DeleteConfirmPopup from \"./DeleteConfirmPopup\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport api from \"../utils/Api\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nfunction App() {\r\n  //состояние попапов\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\r\n  const [isDeletePopupOpen, setDeletePopupOpen] = React.useState(false);\r\n  const [isImagePopupOpen, setImagePopupOpen] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState(false);\r\n  const [currentUser, setCurrentUser] = React.useState([]);\r\n  const [cards, setCards] = React.useState([]);\r\n  const [isLoading, setIsLoading] = React.useState(false);\r\n\r\n  const handleCardLike = (card) => {\r\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n    const promise = isLiked\r\n      ? api.dislikeCard(card._id)\r\n      : api.likeCard(card._id);\r\n    promise\r\n      .then((newCard) => {\r\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\r\n        setCards(newCards);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`${err}`);\r\n      });\r\n  };\r\n\r\n  const handleCardDelete = (card) => {\r\n    setIsLoading(true);\r\n    api\r\n      .deleteCard(card._id)\r\n      .then(() => {\r\n        const deleteCards = cards.filter((c) => c._id !== card._id);\r\n        setCards(deleteCards);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`${err}`);\r\n      })\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  const getUserAndCards = async () => {\r\n    try {\r\n      const [userInfo, cards] = await Promise.all([\r\n        api.getUserInfo(),\r\n        api.getCards(),\r\n      ]);\r\n      setCards(cards);\r\n      setCurrentUser(userInfo);\r\n    } catch (err) {\r\n      console.log(`${err}`);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    getUserAndCards();\r\n  }, []);\r\n\r\n  // открыть попапы\r\n  const handleEditAvatarClick = () => {\r\n    setEditAvatarPopupOpen(true);\r\n  };\r\n\r\n  const handleEditProfileClick = () => {\r\n    setEditProfilePopupOpen(true);\r\n  };\r\n\r\n  const handleAddPlaceClick = () => {\r\n    setAddPlacePopupOpen(true);\r\n  };\r\n  const handleDeletePopupOpenClick = (card) => {\r\n    setDeletePopupOpen(true);\r\n    setSelectedCard(card);\r\n  };\r\n  const handleCardClick = (card) => {\r\n    setImagePopupOpen(true);\r\n    setSelectedCard(card);\r\n  };\r\n  //закрыть все попапы\r\n  const closeAllPopups = () => {\r\n    setEditAvatarPopupOpen(false);\r\n    setEditProfilePopupOpen(false);\r\n    setAddPlacePopupOpen(false);\r\n    setDeletePopupOpen(false);\r\n    setSelectedCard(false);\r\n    setImagePopupOpen(false);\r\n  };\r\n\r\n  const handleUpdateUser = (userInfo) => {\r\n    setIsLoading(true);\r\n    api\r\n      .setUserInfo(userInfo)\r\n      .then((userData) => {\r\n        setCurrentUser(userData);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`${err}`);\r\n      })\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  const handleUpdateAvatar = (inputValue) => {\r\n    setIsLoading(true);\r\n    api\r\n      .setAvatar(inputValue)\r\n      .then((avatar) => {\r\n        setCurrentUser(avatar);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`${err}`);\r\n      })\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  const handleAddPlaceSubmit = (inputValue) => {\r\n    setIsLoading(true);\r\n    api\r\n      .createCard(inputValue)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards,]);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`${err}`);\r\n      })\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <div className=\"page__cover\">\r\n        <CurrentUserContext.Provider value={currentUser}>\r\n          <Header />\r\n          <Main\r\n            onEditAvatar={handleEditAvatarClick}\r\n            onEditProfile={handleEditProfileClick}\r\n            onAddPlace={handleAddPlaceClick}\r\n            onCardClick={handleCardClick}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={handleDeletePopupOpenClick}\r\n            cards={cards}\r\n          />\r\n          <Footer />\r\n          <EditProfilePopup\r\n            isOpen={isEditProfilePopupOpen}\r\n            onClose={closeAllPopups}\r\n            onUpdateUser={handleUpdateUser}\r\n            isLoading={isLoading}\r\n          />\r\n\r\n          <AddPlacePopup\r\n            isOpen={isAddPlacePopupOpen}\r\n            onClose={closeAllPopups}\r\n            onAddPlace={handleAddPlaceSubmit}\r\n            isLoading={isLoading}\r\n          />\r\n\r\n          <EditAvatarPopup\r\n            isOpen={isEditAvatarPopupOpen}\r\n            onClose={closeAllPopups}\r\n            onUpdateAvatar={handleUpdateAvatar}\r\n            isLoading={isLoading}\r\n          />\r\n\r\n          <DeleteConfirmPopup\r\n            isOpen={isDeletePopupOpen}\r\n            onClose={closeAllPopups}\r\n            card={selectedCard}\r\n            onCardDelete={handleCardDelete}\r\n            isLoading={isLoading}\r\n          />\r\n\r\n          <ImagePopup\r\n            isOpen={isImagePopupOpen}\r\n            onClose={closeAllPopups}\r\n            card={selectedCard}\r\n          />\r\n        </CurrentUserContext.Provider>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}